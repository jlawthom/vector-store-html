<!DOCTYPE html>
<html>

<head>
    <title>Chat Window</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }

        .container {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .header {
            padding: 20px;
            border-bottom: 1px solid #ccc;
            background-color: rgba(255, 255, 255, 0.7);
            margin: 10px;
        }

        .header h1 {
            font-size: 24px;
            font-weight: bold;
            margin: 0;
        }

        .header p {
            font-size: 14px;
            color: #666;
            margin: 0;
            margin-top: 10px;
        }

        .expandable-section {
            height: 30px;
            padding: 10px;
            background-image: url(https://img.freepik.com/premium-photo/abstract-background_749522-1.jpg);
            overflow: hidden;
            z-index: 100;
            width: -webkit-fill-available;
            position: absolute;
            border-bottom: 1px solid #ccc;
            /* transition: none; */
            max-height: -webkit-fill-available;
            transition: height 1s ease;
        }

        .expandable-section.expanded {
            /* height: -webkit-fill-available; */
            /* transition: height 5s ease; */
        }

        .expandable-section.blocker {
            position: relative;
            z-index: 0;
        }

        .expand-icon {
            display: block;
            text-align: center;
            cursor: pointer;
            font-size: 20px;
            width: 20px;
            height: 20px;
            margin: auto;
            margin-top: 5px;
        }

        .chat-window {
            flex-grow: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .message {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 10px;
        }

        .sender {
            background-color: #f2f2f2;
            align-self: flex-end;
            margin-left: 30%;
        }

        .receiver {
            border: 1px solid #ccc;
            align-self: flex-start;
            margin-right: 30%;
        }

        .input-area {
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #ccc;
        }

        .input-field {
            flex-grow: 1;
            padding: 5px;
            border: none;
            border-radius: 5px;
        }

        /* .send-button {
            margin-left: 10px;
            padding: 5px 10px;
            background-color: #4CAF50;
            border: none;
            border-radius: 5px;
            color: #fff;
            cursor: pointer;
        } */

        /* Styling for individual conversation items */
        .conversation-item {
            cursor: pointer;
            padding: 10px;
            border-top: 1px solid #ccc;
            transition: visibility 1s ease, opacity 1s ease;
            visibility: hidden;
            /* Hide conversation items initially */
            opacity: 0;
            /* Set initial opacity to 0 */
        }

        .conversation-item.collapsed {
            visibility: hidden !important;
            /* Hide collapsed conversation items */
            opacity: 0;
            /* Set opacity to 0 for collapsed conversation items */
        }

        .conversation-item:not(.collapsed) {
            visibility: visible !important;
            /* Show conversation items when not collapsed */
            opacity: 1;
            /* Set opacity to 1 for visible conversation items */
        }

        .conversation-item:hover {
            background-color: rgb(85, 85, 85, 0.6);
            ;
        }

        .item-text {
            margin-right: 4px;
            margin-left: 8px;
        }

        .expandable-content {
            margin-top: 50px;
        }

        #send-button {
            width: 9.5%;
            height: 95%;
            color: #999;
            border-color: transparent;
            background-color: transparent;
        }

        #send-button.active {
            color: #000;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="expandable-section" id="expandableContent">
            <div class="expand-icon" onclick="toggleExpandableSection()"">&#x25BC;</div>
            <div class=" expandable-content">
                <!-- Update the styles for .conversation-item -->
                <div class="conversation-item active collapsed" style="visibility: hidden; opacity: 0;">
                    <i class="fas fa-user"></i> <span class="item-text">John Smith</span>
                    <i class="fas fa-globe"></i>
                    <i class="fab fa-whatsapp"></i>
                </div>
                <div class="conversation-item collapsed" style="visibility: hidden; opacity: 0;">
                    <i class="fas fa-user"></i> <span class="item-text">Jane Doe</span>
                    <i class="fab fa-whatsapp"></i>
                </div>
                <div class="conversation-item collapsed" style="visibility: hidden; opacity: 0;">
                    <i class="fas fa-user"></i> <span class="item-text">Web Visitor 834652</span>
                    <i class="fas fa-globe"></i>
                </div>
            </div>
        </div>
        <div class="expandable-section blocker"> </div>
        <div class="header">
            <!-- Update the styles for #header-section h1 -->
            <h1
                style="background: -webkit-linear-gradient(135deg, rgba(191, 57, 137, 1) 0%, rgba(9, 107, 222, 1) 50%, rgba(191, 57, 137, 1) 100%);-webkit-background-clip: text;-webkit-text-fill-color: transparent;">
                John Smith
            </h1>
            <!-- Update the styles for #header-section p -->
            <p>WhatsApp | +1 123 456 7890</p>
            <p>Summary: The customer is looking for guitar lessons in the Radyr area and has never played guitar before.
            </p>
        </div>
        <div class="chat-window" id="chatWindow">
            <div class="message sender">Hello, how can I assist you today?</div>
            <div class="message receiver">I have a question about your products.</div>
            <div class="message sender">Sure, what would you like to know?</div>
            <div class="message receiver">Can you provide more information about the warranty?</div>
        </div>
        <div class="input-area">
            <input type="text" class="input-field" id="messageInput" placeholder="Type a message..." />
            <!-- <button class="send-button" onclick="sendMessage()">Send</button> -->
            <button id="send-button" onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <script>
        var isCollapsed = true;

        // JavaScript code to handle collapsible conversation list
        document.addEventListener("DOMContentLoaded", function () {
            var chatInput = document.getElementById("messageInput");
            var sendButton = document.getElementById("send-button");

            chatInput.addEventListener("input", function () {
                if (chatInput.value.trim() === "") {
                    sendButton.classList.remove("active");
                } else {
                    sendButton.classList.add("active");
                }
            });
        });

        function sendMessage() {
                var messageInput = document.getElementById('messageInput');
                var chatWindow = document.getElementById('chatWindow');

                var message = messageInput.value;
                if (message.trim() === '') {
                    return;
                }

                var messageElement = document.createElement('div');
                messageElement.classList.add('message');
                messageElement.classList.add('sender');
                messageElement.textContent = message;

                chatWindow.appendChild(messageElement);
                messageInput.value = '';

                chatWindow.scrollTop = chatWindow.scrollHeight; // Scroll to the bottom of the chat window
            }

        function toggleExpandableSection() {
                var expandableContent = document.getElementById('expandableContent');
                var expandableSection = document.querySelector('.expandable-section');
                var conversationItems = document.getElementsByClassName("conversation-item");

                expandableSection.classList.toggle('expanded');

                if (expandableSection.classList.contains('expanded')) {
                    expandableContent.style.height = window.innerHeight + 'px';
                } else {
                    expandableContent.style.height = '30px';
                }

                isCollapsed = !isCollapsed;

                for (var i = 0; i < conversationItems.length; i++) {
                    conversationItems[i].classList.toggle("collapsed", isCollapsed);
                }

                // Wait for transition to complete before showing conversation items
                setTimeout(function () {
                    for (var i = 0; i < conversationItems.length; i++) {
                        conversationItems[i].style.visibility = isCollapsed ? "hidden" : "visible";
                        conversationItems[i].style.opacity = isCollapsed ? 0 : 1;
                    }
                }, 300); // Same duration as transition in CSS (0.3s)
            }


    </script>
</body>

</html>
